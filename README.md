# Hack-A-Fleet v2.0

This is the repository containing Python tools and datasets for _Hack-A-Fleet v2.0_.

## File descriptions

- `ferry_trips.xlsx`: An Excel file containing records of trips made by 5 ferries owned by Färjerederiet. See the section "Ferry trips" below for more information about the contents.
- `ferries.json`: A JSON file containing additionsal information of the ferries named in the file `ferry_trips.xlsx`, such as the `pontos_vessel_id` for querying the REST-API of PONTOS-HUB.
- `utils.py`: A Python module containing utility functions to fetch vessel data from PONTOS-HUB, manipulate it, and visualize it.
- `examples.ipynb`: A Jupyter notebook containing examples of the useage of the functions in `utils.py`.
- `extend_ferry_trips.py`: A Python script that extends the trip information of `ferry_trips.xlsx` using the data in PONTOS-HUB (e.g. distance and fuel consumption). Generates the file `extended_ferry_trips.csv`. Uses data averaged within a 5 seconds time bucket.
- `extended_ferry_trips.csv`: A CSV file generated by `extend_ferry_trips.py`. Contains the trip data in `ferry_trips.xlsx` and the extended information calculated from the data in PONTOS-HUB.

## Get Started with the Python tools

1. Clone the repository.

2. Create a file called `.env` and save it the root directory (i.e. the same directory that contains `utils.py`). The content of the file must be:

```
PONTOS_TOKEN=<Your token obtained from pontos.ri.se>
```

This file is read by `utils.py` when loaded so that the requests to PONTOS-HUB are authorized.

3. Create a virtual environment (e.g. using `pyenv`or `conda`).

4. Install all the dependencies `pip install -r requirements.txt`.

5. Take a look at `examples.ipynb`.

## Ferry trips

Each row in the `ferry_trips.xlsx` and `extended_ferry_trips.csv` files contain fields describing 2 trips between two terminals:

    - An `outbound` trip from the departure terminal to the arrival terminal.
    - An `inbound` trip from the arrival terminal to the departure terminal.

The suffixes `outbound` and `inbound` in the field names indicate to which trip does the field corresponds to.

Here follows a description of _some_ of the fields as most of them are self-explanatory:

- `time_departure`: Time of departure for the outbound trip as recoreded by Färjerederiet. Given in Central European Time (CET).
- `vehicles_left_at_terminal_outbound/inbound`: Number of vehicles left at the terminal on departure for the outbound/inbound trip. _Estimated by the crew._
- `trip_type`: One of the following types of trip:
  - `ordinary`- Ordinary trip.
  - `doubtful` – An "ordinary" trip that does not match the timetable.
  - `extra` – An extra trip by an additional ferry that does not follow the timetable.
  - `proactive` – A trip made before the ordinary trip to stay ahead, comparable to an extra trip.
  - `doubling` – An extra trip beetween two regular trips to take car of vehicles left behind in the termial.
- `tailored_trip`: A special trip for vehicles with dangerous cargo. (1: True, 0: False).
- `distance_outbound/inbound_nm`: Approximate distance travelled in the outbound/inbound trip. Calculated from PONTOS-HUB data and given in nautical miles.
- `fuelcons_outbound/inbound_l`: Approximate fuel consumption in the outbound/inbound trip. Calculated from PONTOS-HUB data and given in liters.
- `start_time_outbound/inbound`: Approximate start time of the outbound/inbound trip. Calculated from PONTOS-HUB data and given in CET.
- `end_time_outbound/inbound`: Approximate end time of the outbound/inbound trip. Calculated from PONTOS-HUB data and given in CET.
